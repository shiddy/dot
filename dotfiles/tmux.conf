.▄▄ ·  ▄ .▄▪  ·▄▄▄▄  ·▄▄▄▄   ▄· ▄▌.▄▄ ·     ▄▄▄▄▄• ▌ ▄ ·. ▄• ▄▌▐▄• ▄
▐█ ▀. ██▪▐███ ██▪ ██ ██▪ ██ ▐█▪██▌▐█ ▀.     •██  ·██ ▐███▪█▪██▌ █▌█▌▪
▄▀▀▀█▄██▀▐█▐█·▐█· ▐█▌▐█· ▐█▌▐█▌▐█▪▄▀▀▀█▄     ▐█.▪▐█ ▌▐▌▐█·█▌▐█▌ ·██·
▐█▄▪▐███▌▐▀▐█▌██. ██ ██. ██  ▐█▀·.▐█▄▪▐█     ▐█▌·██ ██▌▐█▌▐█▄█▌▪▐█·█▌
 ▀▀▀▀ ▀▀▀ ·▀▀▀▀▀▀▀▀• ▀▀▀▀▀•   ▀ •  ▀▀▀▀      ▀▀▀ ▀▀  █▪▀▀▀ ▀▀▀ •▀▀ ▀▀

#If you don't like the default C-b binding. I use an ergo keyboard so this might be better for you
#set-option -g prefix C-a
#unbind-key C-a
#bind-key C-a send-prefix

# Set vi bindings
setw -g mode-keys vi

bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel

# Start window indexes at 1
set-option -g base-index 1
set-window-option -g pane-base-index 1
setw -g pane-base-index 1

#Fast resets
bind-key R source-file ~/.tmux.conf \; display-message "tmux.conf reloaded."

# Tmux can make the escape sequence slow... let's fix that
set -s escape-time 0

set -g default-terminal "screen-256color"

set -g history-limit 999999999

set-option -g status-position top
set-window-option -g xterm-keys on
bind-key -n S-Up set-option -g status

set-window-option -g window-status-style "fg=#427b58"
set-window-option -g window-status-current-style "fg=#282828,bg=colour15"

set -g window-style 'fg=default,bg=default'
set -g window-active-style 'fg=default,bg=default'
set -g pane-active-border-style "bg=#427b58,fg=#427b58"

set-option -g message-style "fg=white,bright,bg=black"

# set-option -g status-style "fg=white"
set -g status-style "bg=#8ec07c, fg=colour0"
set -g status-left ' #S '
set -g status-left-style "bg=colour0,fg=colour15"
set -g status-justify centre
setw -g window-status-format         ' #(echo "#I:#{pane_current_command}") '
setw -g window-status-current-format ' #(echo "   #{pane_current_command}   ") '
set -g status-right " "

#New Windows with C-Down
bind -n S-down new-window

#Make new panes open in your current working directory
bind c new-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind '"' split-window -h -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

#Setting Window movements with Shift + arrow
bind-key -n S-left previous-window
# bind-key -n M-h previous-window
bind-key -n S-right next-window
# bind-key -n M-l next-window

#Setting Pane movements with Alt + arrow (OSX already owns this CTRL)
bind-key -n M-up select-pane -U
bind-key -n M-down select-pane -D
bind-key -n M-left select-pane -L
bind-key -n M-right select-pane -R

#bind-key -n M-C-Up resize-pane -U 1
#bind-key -n M-C-Down resize-pane -D 1
#bind-key -n M-C-Left resize-pane -L 1
#bind-key -n M-C-Right resize-pane -R 1

# Patch for OS X pbpaste and pbcopy under tmux.
# set-option -g default-command "which reattach-to-user-namespace > /dev/null && reattach-to-user-namespace -l $SHELL || $SHELL"

# Set the default shell to something more... touched.
#set -g default-command /bin/zsh
#set -g default-shell /bin/zsh
#set -g default-command "reattach-to-user-namespace -l zsh"

bind -n C-x setw synchronize-panes

_tmux_send_keys_all_panes_ () {
  for _pane in $(tmux list-panes -F '#P'); do
    tmux send-keys -t ${_pane} "$@"
  done
}
